import{c as h,r as n,j as e,b as p,A as g,m as o,C as f,d as y,R as j}from"./tailwind-hv3IhW6i.js";const b=h("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),N=()=>{const[a,r]=n.useState("idle"),[v,w]=n.useState([]),[s,c]=n.useState(null),t=document.getElementById("wprai-rescue-root"),d=(t==null?void 0:t.dataset.endpoint)||"",x=(t==null?void 0:t.dataset.token)||"",m=async()=>{r("analyzing");try{const i=await(await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:x})})).json();i.success?(c(i.data),r("fixed")):r("error")}catch{r("error")}};return e.jsxs("div",{className:"min-h-screen bg-background text-foreground font-sans flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-primary/10 via-background to-background pointer-events-none"}),e.jsxs("div",{className:"relative z-10 max-w-2xl w-full space-y-12 text-center",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-primary/20 text-primary mb-4",children:e.jsx(b,{className:"w-8 h-8"})}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold tracking-tight",children:"Rescue Mode"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-lg mx-auto",children:"AI is ready to diagnose your site and fix critical errors automatically."})]}),e.jsxs("div",{className:"bg-card/50 backdrop-blur-xl border border-border/50 rounded-3xl p-8 shadow-2xl",children:[a==="idle"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 text-amber-500 bg-amber-500/10 p-4 rounded-xl",children:[e.jsx(p,{className:"w-6 h-6"}),e.jsx("span",{className:"font-medium",children:"Site is currently experiencing issues"})]}),e.jsxs("button",{onClick:m,className:"w-full py-4 text-xl font-bold text-white bg-primary rounded-xl hover:bg-primary/90 transition-all shadow-lg shadow-primary/25 flex items-center justify-center gap-3 group",children:[e.jsx("span",{children:"Start AI Diagnosis"}),e.jsx(g,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]})]}),a==="analyzing"&&e.jsxs("div",{className:"space-y-8 py-8",children:[e.jsxs("div",{className:"relative w-24 h-24 mx-auto",children:[e.jsx(o.div,{className:"absolute inset-0 border-4 border-primary/30 rounded-full",animate:{scale:[1,1.1,1],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0}}),e.jsx(o.div,{className:"absolute inset-0 border-t-4 border-primary rounded-full",animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"}})]}),e.jsx("p",{className:"text-xl font-medium animate-pulse",children:"Reading debug logs..."})]}),a==="fixed"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-green-500/20 text-green-500 rounded-full mx-auto",children:e.jsx(f,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Diagnosis Complete"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:(s==null?void 0:s.message)||"We found and fixed the issue."})]}),(s==null?void 0:s.suspected_plugins)&&e.jsxs("div",{className:"bg-muted/50 p-4 rounded-xl text-left",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Culprit found:"}),e.jsx("code",{className:"block bg-black/20 p-2 rounded text-sm",children:s.suspected_plugins[0]})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-3 font-medium bg-secondary hover:bg-secondary/80 rounded-xl transition-colors",children:"Reload Site"})]}),a==="error"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-red-500",children:"Something went wrong connecting to the rescue server."}),e.jsx("button",{onClick:()=>r("idle"),className:"text-sm underline",children:"Try again"})]})]})]})]})},l=document.getElementById("wprai-rescue-root");l?y(l).render(e.jsx(j.StrictMode,{children:e.jsx(N,{})})):console.error("WP RescueMode AI: Root element #wprai-rescue-root not found");
